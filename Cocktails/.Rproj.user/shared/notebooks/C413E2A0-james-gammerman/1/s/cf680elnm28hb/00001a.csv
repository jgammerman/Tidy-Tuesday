"0",""
"0","ingredients_summarized <- cocktails_parsed_filtered %>%         "
"0","        group_by(name) %>% "
"0","        mutate(percentile = row_number() / n()) %>%  # account for fact that some recipes have many ingredients and some don't"
"0","        ungroup() %>% "
"0","        group_by(ingredient) %>% "
"0","        summarize(n = n(),"
"0","                  n_with_measure = sum(!is.na(measure_number)),"
"0","                  avg_position = mean(percentile),"
"0","                  avg_serving = mean(measure_number, na.rm = TRUE)) %>% "
"0","        arrange(desc(n)) "
"0",""
"0","#ingredients_summarized"
"0",""
"0","library(ggraph)"
"0","library(igraph)"
"0","library(ggrepel)"
"0",""
"0","top_cors <- ingredient_pairs %>% "
"0","        head(70)"
"0",""
"0","ingredient_info <- ingredients_summarized %>% "
"0","        filter(ingredient %in% top_cors$item1) %>% "
"0","        distinct()"
"0",""
"0","# ~ 35 mins     "
"0","top_cors %>% "
"0","        graph_from_data_frame(vertices = ingredient_info) %>% "
"0","        ggraph(layout = ""fr"") +"
"0","        geom_edge_link() +"
"0","        geom_node_text(aes(label = name), repel = TRUE) +"
"0","        geom_node_point(aes(size = 1.1* n)) +        "
"0","        geom_node_point(aes(size = n, color = avg_position)) +"
"0","        scale_color_gradient2(low = ""red"", high = ""blue"", midpoint = .5,"
"0","                              labels = scales::percent_format()) +"
"0","        labs(size = ""# of recipes"","
"0","             color = ""Avg position in drink"","
"0","             title = ""The universe of cocktail ingredients"","
"0","             subtitle = ""Connected ingredients tend to appear in the same drink. Red ingredients are early in the recipe, \n blue ingredients tend to be later"")"
